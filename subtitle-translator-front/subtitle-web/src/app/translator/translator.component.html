<div class="page">
  <mat-card class="main-card">
    <mat-card-title>Subtitle Translator</mat-card-title>
    <mat-card-content>

      <h3>Selected file:</h3>
      <p class="selected">{{ selectedFile || 'No file selected' }}</p>

      <h3>Browse /mnt/media</h3>
      <div class="file-browser">
        <button mat-stroked-button
                *ngFor="let item of items"
                (click)="item.isDir ? loadFolder(item.path) : selectFile(item.path)"
                [color]="item.isSrt ? 'primary' : ''">
          {{ item.isDir ? 'Folder' : '' }} {{ item.name }}
        </button>
      </div>

      <div class="options">
        <mat-form-field appearance="fill">
          <mat-label>Target Language</mat-label>
          <mat-select [(ngModel)]="targetLang">
            <mat-option value="en">English</mat-option>
            <mat-option value="ja">Japanese</mat-option>
            <mat-option value="es">Spanish</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Ollama Model</mat-label>
          <mat-select [(ngModel)]="selectedModel" (openedChange)="loadModels()">
            <mat-option *ngFor="let m of models" [value]="m">{{ m }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <button mat-raised-button
              color="accent"
              (click)="translate()"
              [disabled]="translating || !selectedFile"
              style="margin-top: 20px">
        {{ translating ? 'Translating...' : 'Start Translation' }}
      </button>

      <mat-progress-bar *ngIf="translating"
                        mode="determinate"
                        [value]="progress"
                        style="margin-top: 15px">
      </mat-progress-bar>

      <pre class="log" *ngIf="log">{{ log }}</pre>
    </mat-card-content>
  </mat-card>
</div>